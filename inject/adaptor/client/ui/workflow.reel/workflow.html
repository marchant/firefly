<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="workflow.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {"#": "owner"}
            }
        },

        "currentBranchName": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "currentBranchName"}
            },
            "bindings": {
                "value": {"<-": "@owner.projectDocument.currentBranch.name"}
            }
        },

        "shadowCount": {
            "prototype": "montage/ui/text.reel",
            "properties": {
                "element": {"#": "shadowCount"}
            },
            "bindings": {
                "value": {"<-": "@owner.projectDocument.aheadCount"}
            }
        },

        "panelSubstitution": {
            "prototype": "montage/ui/substitution.reel",
            "properties": {
                "element": {"#": "panelSubstitution"},
                "switchValue": "pristine"
            },
            "bindings": {
                "switchValue": {"<-": "@owner.panelKey"}
            }
        },

        "acceptButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {"#": "acceptButton"},
                "label": "Accept",
                "title": "Save all edited documents"
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {"@": "owner"}
                }
            ]
        },

        "discardButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {"#": "discardButton"},
                "label": "Discard…",
                "title": "Discard all unsaved edits made to documents"
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {"@": "owner"}
                }
            ]
        },

        "mergeButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {"#": "mergeButton"},
                "label": "Merge…",
                "title": "Merge all draft commits into the polished branch"
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {"@": "owner"}
                }
            ]
        },

        "resetButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {"#": "resetButton"},
                "label": "Reset…",
                "title": "Reset back to the last published commit, discarding all draft commits"
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {"@": "owner"}
                }
            ]
        }
    }
    </script>
</head>
<body>
    <div data-montage-id="owner" class="Workflow">
        <span data-montage-id="currentBranchName"></span>
        <span data-montage-id="shadowCount"></span>

        <div data-montage-id="panelSubstitution">
            <section data-arg="busy" data-montage-id="busyWorkspacePanel">Busy…</section>
            <section data-arg="pristine" data-montage-id="pristineWorkspacePanel"></section>
            <section data-arg="ahead" data-montage-id="aheadWorkspacePanel">
                <h1>Ready to publish</h1>
                <button data-montage-id="mergeButton"></button>
                <button data-montage-id="resetButton"></button>
            </section>
            <section data-arg="behind" data-montage-id="behindWorkspacePanel">
                Behind
            </section>
            <section data-arg="diverged" data-montage-id="divergedWorkspacePanel">
                Diverged
            </section>
            <section data-arg="dirty" data-montage-id="dirtyWorkspacePanel">
                <h1>Unsaved changes</h1>
                <button data-montage-id="acceptButton"></button>
                <button data-montage-id="discardButton"></button>
            </section>
        </div>
    </div>
</body>
</html>
